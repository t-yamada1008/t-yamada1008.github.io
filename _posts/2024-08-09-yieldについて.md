---
layout: post
title: yieldについて
date: 2024-08-09
categories: [TIL]
tags: []
---

yieldは、Rubyのメソッドの中でブロックを呼び出すためのキーワードです。メソッドにブロックが渡された場合、そのブロックをyieldで実行することができます。ブロックの中で行いたい処理をカスタマイズできるため、柔軟なメソッドの定義が可能になります。

基本的な使い方
メソッド内でのyieldの使用
ruby
コードをコピーする
def my_method
  puts "Before yield"
  yield if block_given?
  puts "After yield"
end

my_method { puts "Inside the block" }
この例では、my_methodというメソッド内でyieldを使用しています。メソッドが呼び出されると、yieldによって渡されたブロックが実行されます。

arduino
コードをコピーする
出力:
Before yield
Inside the block
After yield
yieldに引数を渡す
yieldに引数を渡すと、ブロックの引数として受け取ることができます。

ruby
コードをコピーする
def my_method
  yield(5) if block_given?
end

my_method { |x| puts x * 2 }
この例では、yield(5)によってブロックに5が渡され、ブロック内でxとして受け取られます。

makefile
コードをコピーする
出力:
10
yieldの有無を確認する
メソッド内でブロックが渡されているかどうかを確認するには、block_given?メソッドを使います。

ruby
コードをコピーする
def my_method
  if block_given?
    yield
  else
    puts "No block given"
  end
end

my_method
my_method { puts "Block given" }
この例では、block_given?を使ってブロックが渡されているかどうかを確認し、それに応じた処理を行います。

perl
コードをコピーする
出力:
No block given
Block given
yieldを使ったイテレータ
yieldを使って独自のイテレータを定義することができます。

ruby
コードをコピーする
def my_each(array)
  for element in array
    yield(element)
  end
end

my_each([1, 2, 3]) { |num| puts num }
この例では、my_eachメソッドが配列の各要素をyieldでブロックに渡して処理しています。

makefile
コードをコピーする
出力:
1
2
3
yieldとEnumerator
カスタムイテレータを作成する際にもyieldが使われます。

ruby
コードをコピーする
enum = Enumerator.new do |yielder|
  yielder.yield 1
  yielder.yield 2
  yielder.yield 3
end

puts enum.next  # 出力: 1
puts enum.next  # 出力: 2
puts enum.next  # 出力: 3
この例では、Enumerator.newを使ってカスタムイテレータを作成し、yieldメソッドで値を生成しています。

ANKIカードの作成
前面（Front）
text
コードをコピーする
Rubyの`yield`キーワードの役割は何ですか？基本的な使用例を示してください。
背面（Back）
ruby
コードをコピーする
# `yield`は、メソッド内で渡されたブロックを呼び出すためのキーワードです。

#### メソッド内での`yield`の使用例
def my_method
  puts "Before yield"
  yield if block_given?
  puts "After yield"
end

my_method { puts "Inside the block" }
# 出力:
# Before yield
# Inside the block
# After yield

#### `yield`に引数を渡す例
def my_method
  yield(5) if block_given?
end

my_method { |x| puts x * 2 }
# 出力: 10

#### `yield`の有無を確認する例
def my_method
  if block_given?
    yield
  else
    puts "No block given"
  end
end

my_method
my_method { puts "Block given" }
# 出力:
# No block given
# Block given

#### `yield`を使ったイテレータの例
def my_each(array)
  for element in array
    yield(element)
  end
end

my_each([1, 2, 3]) { |num| puts num }
# 出力:
# 1
# 2
# 3

#### `yield`と`Enumerator`の例
enum = Enumerator.new do |yielder|
  yielder.yield 1
  yielder.yield 2
  yielder.yield 3
end

puts enum.next  # 出力: 1
puts enum.next  # 出力: 2
puts enum.next  # 出力: 3